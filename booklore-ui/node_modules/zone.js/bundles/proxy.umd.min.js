'use strict';
/**
 * @license Angular
 * (c) 2010-2025 Google LLC. https://angular.dev/
 * License: MIT
 */(function(g,f){if(typeof define=="function"&&define.amd){define(f)}else if(typeof exports=="object" && typeof module<"u"){module.exports=f()}else{var m=f();for(var i in m) g[i]=m[i]}}(typeof globalThis < "u" ? globalThis : typeof self < "u" ? self : this,function(){var exports={};var __exports=exports;var module={exports};
"use strict";(function(a,p){if(typeof define=="function"&&define.amd)define(p);else if(typeof exports=="object"&&typeof module<"u")module.exports=p();else{var c=p();for(var u in c)a[u]=c[u]}})(typeof globalThis<"u"?globalThis:typeof self<"u"?self:exports,function(){var a={},p=a,c={exports:a},u=Object.defineProperty,l=function(i,e,s){return e in i?u(i,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):i[e]=s},n=function(i,e,s){return l(i,typeof e!="symbol"?e+"":e,s),s},d=function(){function i(e){e===void 0&&(e=null),n(this,"defaultSpecDelegate"),n(this,"name","ProxyZone"),n(this,"_delegateSpec",null),n(this,"properties",{ProxyZoneSpec:this}),n(this,"propertyKeys",null),n(this,"lastTaskState",null),n(this,"isNeedToTriggerHasTask",!1),n(this,"tasks",[]),this.defaultSpecDelegate=e,this.setDelegate(e)}return i.get=function(){return Zone.current.get("ProxyZoneSpec")},i.isLoaded=function(){return i.get()instanceof i},i.assertPresent=function(){var e=i.get();if(e===void 0)throw new Error("Expected to be running in 'ProxyZone', but it was not found.");return e},i.prototype.setDelegate=function(e){var s=this,r=this._delegateSpec!==e;this._delegateSpec=e,this.propertyKeys&&this.propertyKeys.forEach(function(t){return delete s.properties[t]}),this.propertyKeys=null,e&&e.properties&&(this.propertyKeys=Object.keys(e.properties),this.propertyKeys.forEach(function(t){return s.properties[t]=e.properties[t]})),r&&this.lastTaskState&&(this.lastTaskState.macroTask||this.lastTaskState.microTask)&&(this.isNeedToTriggerHasTask=!0)},i.prototype.getDelegate=function(){return this._delegateSpec},i.prototype.resetDelegate=function(){var e=this.getDelegate();this.setDelegate(this.defaultSpecDelegate)},i.prototype.tryTriggerHasTask=function(e,s,r){this.isNeedToTriggerHasTask&&this.lastTaskState&&(this.isNeedToTriggerHasTask=!1,this.onHasTask(e,s,r,this.lastTaskState))},i.prototype.removeFromTasks=function(e){if(this.tasks){for(var s=0;s<this.tasks.length;s++)if(this.tasks[s]===e){this.tasks.splice(s,1);return}}},i.prototype.getAndClearPendingTasksInfo=function(){if(this.tasks.length===0)return"";var e=this.tasks.map(function(r){var t=r.data&&Object.keys(r.data).map(function(o){return o+":"+r.data[o]}).join(",");return"type: ".concat(r.type,", source: ").concat(r.source,", args: {").concat(t,"}")}),s="--Pending async tasks are: ["+e+"]";return this.tasks=[],s},i.prototype.onFork=function(e,s,r,t){return this._delegateSpec&&this._delegateSpec.onFork?this._delegateSpec.onFork(e,s,r,t):e.fork(r,t)},i.prototype.onIntercept=function(e,s,r,t,o){return this._delegateSpec&&this._delegateSpec.onIntercept?this._delegateSpec.onIntercept(e,s,r,t,o):e.intercept(r,t,o)},i.prototype.onInvoke=function(e,s,r,t,o,h,f){return this.tryTriggerHasTask(e,s,r),this._delegateSpec&&this._delegateSpec.onInvoke?this._delegateSpec.onInvoke(e,s,r,t,o,h,f):e.invoke(r,t,o,h,f)},i.prototype.onHandleError=function(e,s,r,t){return this._delegateSpec&&this._delegateSpec.onHandleError?this._delegateSpec.onHandleError(e,s,r,t):e.handleError(r,t)},i.prototype.onScheduleTask=function(e,s,r,t){return t.type!=="eventTask"&&this.tasks.push(t),this._delegateSpec&&this._delegateSpec.onScheduleTask?this._delegateSpec.onScheduleTask(e,s,r,t):e.scheduleTask(r,t)},i.prototype.onInvokeTask=function(e,s,r,t,o,h){return t.type!=="eventTask"&&this.removeFromTasks(t),this.tryTriggerHasTask(e,s,r),this._delegateSpec&&this._delegateSpec.onInvokeTask?this._delegateSpec.onInvokeTask(e,s,r,t,o,h):e.invokeTask(r,t,o,h)},i.prototype.onCancelTask=function(e,s,r,t){return t.type!=="eventTask"&&this.removeFromTasks(t),this.tryTriggerHasTask(e,s,r),this._delegateSpec&&this._delegateSpec.onCancelTask?this._delegateSpec.onCancelTask(e,s,r,t):e.cancelTask(r,t)},i.prototype.onHasTask=function(e,s,r,t){this.lastTaskState=t,this._delegateSpec&&this._delegateSpec.onHasTask?this._delegateSpec.onHasTask(e,s,r,t):e.hasTask(r,t)},i}();function T(i){i.ProxyZoneSpec=d}return T(Zone),p!=a&&(c.exports=a),c.exports});

if(__exports != exports)module.exports = exports;return module.exports}));
