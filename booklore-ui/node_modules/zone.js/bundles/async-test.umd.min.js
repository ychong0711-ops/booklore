'use strict';
/**
 * @license Angular
 * (c) 2010-2025 Google LLC. https://angular.dev/
 * License: MIT
 */(function(g,f){if(typeof define=="function"&&define.amd){define(f)}else if(typeof exports=="object" && typeof module<"u"){module.exports=f()}else{var m=f();for(var i in m) g[i]=m[i]}}(typeof globalThis < "u" ? globalThis : typeof self < "u" ? self : this,function(){var exports={};var __exports=exports;var module={exports};
"use strict";(function(l,y){if(typeof define=="function"&&define.amd)define(y);else if(typeof exports=="object"&&typeof module<"u")module.exports=y();else{var d=y();for(var _ in d)l[_]=d[_]}})(typeof globalThis<"u"?globalThis:typeof self<"u"?self:exports,function(){var l={},y=l,d={exports:l},_=Object.defineProperty,b=function(t,e,i){return e in t?_(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i},s=function(t,e,i){return b(t,typeof e!="symbol"?e+"":e,i),i},k=globalThis;function P(t){var e=k.__Zone_symbol_prefix||"__zone_symbol__";return e+t}var C=globalThis,Z=function(){function t(e,i,r){s(this,"finishCallback"),s(this,"failCallback"),s(this,"_pendingMicroTasks",!1),s(this,"_pendingMacroTasks",!1),s(this,"_alreadyErrored",!1),s(this,"_isSync",!1),s(this,"_existingFinishTimer",null),s(this,"entryFunction",null),s(this,"runZone",Zone.current),s(this,"unresolvedChainedPromiseCount",0),s(this,"supportWaitUnresolvedChainedPromise",!1),s(this,"name"),s(this,"properties"),this.finishCallback=e,this.failCallback=i,this.name="asyncTestZone for "+r,this.properties={AsyncTestZoneSpec:this},this.supportWaitUnresolvedChainedPromise=C[P("supportWaitUnResolvedChainedPromise")]===!0}return Object.defineProperty(t,"symbolParentUnresolved",{get:function(){return P("parentUnresolved")},enumerable:!1,configurable:!0}),t.prototype.isUnresolvedChainedPromisePending=function(){return this.unresolvedChainedPromiseCount>0},t.prototype._finishCallbackIfDone=function(){var e=this;this._existingFinishTimer!==null&&(clearTimeout(this._existingFinishTimer),this._existingFinishTimer=null),this._pendingMicroTasks||this._pendingMacroTasks||this.supportWaitUnresolvedChainedPromise&&this.isUnresolvedChainedPromisePending()||this.runZone.run(function(){e._existingFinishTimer=setTimeout(function(){!e._alreadyErrored&&!(e._pendingMicroTasks||e._pendingMacroTasks)&&e.finishCallback()},0)})},t.prototype.patchPromiseForTest=function(){if(this.supportWaitUnresolvedChainedPromise){var e=Promise[Zone.__symbol__("patchPromiseForTest")];e&&e()}},t.prototype.unPatchPromiseForTest=function(){if(this.supportWaitUnresolvedChainedPromise){var e=Promise[Zone.__symbol__("unPatchPromiseForTest")];e&&e()}},t.prototype.onScheduleTask=function(e,i,r,n){return n.type!=="eventTask"&&(this._isSync=!1),n.type==="microTask"&&n.data&&n.data instanceof Promise&&n.data[t.symbolParentUnresolved]===!0&&this.unresolvedChainedPromiseCount--,e.scheduleTask(r,n)},t.prototype.onInvokeTask=function(e,i,r,n,u,c){return n.type!=="eventTask"&&(this._isSync=!1),e.invokeTask(r,n,u,c)},t.prototype.onCancelTask=function(e,i,r,n){return n.type!=="eventTask"&&(this._isSync=!1),e.cancelTask(r,n)},t.prototype.onInvoke=function(e,i,r,n,u,c,o){this.entryFunction||(this.entryFunction=n);try{return this._isSync=!0,e.invoke(r,n,u,c,o)}finally{this._isSync&&this.entryFunction===n&&this._finishCallbackIfDone()}},t.prototype.onHandleError=function(e,i,r,n){var u=e.handleError(r,n);return u&&(this.failCallback(n),this._alreadyErrored=!0),!1},t.prototype.onHasTask=function(e,i,r,n){e.hasTask(r,n),i===r&&(n.change=="microTask"?(this._pendingMicroTasks=n.microTask,this._finishCallbackIfDone()):n.change=="macroTask"&&(this._pendingMacroTasks=n.macroTask,this._finishCallbackIfDone()))},t}();function x(t){t.AsyncTestZoneSpec=Z,t.__load_patch("asynctest",function(e,i,r){i[r.symbol("asyncTest")]=function(c){return e.jasmine?function(o){o||(o=function(){},o.fail=function(a){throw a}),n(c,this,void 0,o,function(a){if(typeof a=="string")return o.fail(new Error(a));o.fail(a)})}:function(){for(var o=this,a=[],f=0;f<arguments.length;f++)a[f]=arguments[f];return new Promise(function(m,T){n(c,o,a,m,T)})}};function n(u,c,o,a,f){var m=i.current,T=i.AsyncTestZoneSpec;if(T===void 0)throw new Error("AsyncTestZoneSpec is needed for the async() test helper but could not be found. Please make sure that your environment includes zone.js/plugins/async-test");var v=i.ProxyZoneSpec;if(!v)throw new Error("ProxyZoneSpec is needed for the async() test helper but could not be found. Please make sure that your environment includes zone.js/plugins/proxy");var h=v.get();v.assertPresent();var F=i.current.getZoneWith("ProxyZoneSpec"),g=h.getDelegate();return F.parent.run(function(){var p=new T(function(){h.getDelegate()==p&&h.setDelegate(g),p.unPatchPromiseForTest(),m.run(function(){a()})},function(S){h.getDelegate()==p&&h.setDelegate(g),p.unPatchPromiseForTest(),m.run(function(){f(S)})},"test");h.setDelegate(p),p.patchPromiseForTest()}),i.current.runGuarded(u,c,o)}})}return x(Zone),y!=l&&(d.exports=l),d.exports});

if(__exports != exports)module.exports = exports;return module.exports}));
